%../../../logics/hlm%

/**
 * @remarks This definition of categories includes the additional requirement that all categories are [skeletal](https://en.wikipedia.org/wiki/Skeleton_(category_theory)). The reasoning behind this is that I expect the equality definition above, which is derived purely syntactically, to be equivalent to _isomorphism_ of categories, not _equivalence_. That is, without this restriction, two isomorphic categories would be considered equal, but two equivalent categories would not necessarily be. (This needs to be verified.)
 *
 *          For skeletal categories, the two concepts coincide. Since in HLM, all of the usual examples of categories happen to be skeletal anyway, and we care about equivalence much more than isomorphism, it makes sense to include this requirement directly in the definition of a category.
 *
 *          The natural number `u` is required to be able to define a category of (smaller) categories or functors, which would otherwise be prevented by non-circularity rules. Informally, `u` can be regarded as a â€œuniverse sizeâ€ that is relevant only in the context of category theory. (The â€œuniversesâ€ that are implicit in other contexts are already large enough.)
 *
 * @references * https://en.wikipedia.org/wiki/Category_(mathematics)
 *             * http://mathworld.wolfram.com/Category.html
 *             * https://proofwiki.org/wiki/Definition:Category
 *             * https://ncatlab.org/nlab/show/category
 */
$Categories(u: %Element($../Essentials/Numbers/Natural/"Natural numbers")): %Construction {
  $category(
    O: %Set,
    ğ€: %Binding(
      O,
      #(ğ: %Binding(
        %previous,
        #(M: %Set)
      ))
    ),
    ğ‚: %Binding(
      O,
      #(i: %Element(M[ğ‚,ğ‚]))
    ),
    ğƒ: %Binding(
      O,
      #(ğ„: %Binding(
        %previous,
        #(ğ…: %Binding(
          %previous,
          #(âˆ˜: %Element($../Essentials/Functions/Operations/Operations(
            X = {M[ğ„,ğ…]},
            Y = {M[ğƒ,ğ„]},
            Z = {M[ğƒ,ğ…]}
          )))
        ))
      ))
    ),
    _1: %Constraint(%forall(
      #(
        ğ–: %Element(O),
        ğ—: %Element(%previous),
        ğ˜: %Element(%previous),
        ğ™: %Element(%previous),
        f: %Element(M[ğ–,ğ—]),
        g: %Element(M[ğ—,ğ˜]),
        h: %Element(M[ğ˜,ğ™])
      ),
      %equals(
        $../Essentials/Functions/Operations/value(
          X = {M[ğ—,ğ™]},
          Y = {M[ğ–,ğ—]},
          Z = {M[ğ–,ğ™]},
          âˆ— = {âˆ˜[ğ–,ğ—,ğ™]},
          x = {$../Essentials/Functions/Operations/value(
            X = {M[ğ˜,ğ™]},
            Y = {M[ğ—,ğ˜]},
            Z = {M[ğ—,ğ™]},
            âˆ— = {âˆ˜[ğ—,ğ˜,ğ™]},
            x = {h},
            y = {g}
          )},
          y = {f}
        ),
        $../Essentials/Functions/Operations/value(
          X = {M[ğ˜,ğ™]},
          Y = {M[ğ–,ğ˜]},
          Z = {M[ğ–,ğ™]},
          âˆ— = {âˆ˜[ğ–,ğ˜,ğ™]},
          x = {h},
          y = {$../Essentials/Functions/Operations/value(
            X = {M[ğ—,ğ˜]},
            Y = {M[ğ–,ğ—]},
            Z = {M[ğ–,ğ˜]},
            âˆ— = {âˆ˜[ğ–,ğ—,ğ˜]},
            x = {g},
            y = {f}
          )}
        )
      )
    )),
    _2: %Constraint(%forall(
      #(
        ğ—: %Element(O),
        ğ˜: %Element(%previous),
        f: %Element(M[ğ—,ğ˜])
      ),
      %equals(
        $../Essentials/Functions/Operations/value(
          X = {M[ğ˜,ğ˜]},
          Y = {M[ğ—,ğ˜]},
          Z = {M[ğ—,ğ˜]},
          âˆ— = {âˆ˜[ğ—,ğ˜,ğ˜]},
          x = {i[ğ˜]},
          y = {f}
        ),
        $../Essentials/Functions/Operations/value(
          X = {M[ğ—,ğ˜]},
          Y = {M[ğ—,ğ—]},
          Z = {M[ğ—,ğ˜]},
          âˆ— = {âˆ˜[ğ—,ğ—,ğ˜]},
          x = {f},
          y = {i[ğ—]}
        ),
        f
      )
    )),
    _3: %Constraint(%forall(
      #(
        ğ—: %Element(O),
        ğ˜: %Element(%previous),
        _4: %Constraint(%exists(
          #(
            f: %Element(M[ğ—,ğ˜]),
            g: %Element(M[ğ˜,ğ—])
          ),
          formula = %and(
            %equals(
              $../Essentials/Functions/Operations/value(
                X = {M[ğ—,ğ˜]},
                Y = {M[ğ˜,ğ—]},
                Z = {M[ğ˜,ğ˜]},
                âˆ— = {âˆ˜[ğ˜,ğ—,ğ˜]},
                x = {f},
                y = {g}
              ),
              i[ğ˜]
            ),
            %equals(
              $../Essentials/Functions/Operations/value(
                X = {M[ğ˜,ğ—]},
                Y = {M[ğ—,ğ˜]},
                Z = {M[ğ—,ğ—]},
                âˆ— = {âˆ˜[ğ—,ğ˜,ğ—]},
                x = {g},
                y = {f}
              ),
              i[ğ—]
            )
          )
        ))
      ),
      %equals(ğ—, ğ˜)
    ))
  ): %Constructor {
    display = [$SubSup(
      body = $VerticalTuple(
        items = [
          O,
          $SubSup(
            body = $Parens(
              body = M,
              style = '()'
            ),
            sub = $ElementRelation(
              element = $Group(
                items = [ğ€, ğ],
                separator = ','
              ),
              set = O
            )
          ),
          $SubSup(
            body = $Parens(
              body = i,
              style = '()'
            ),
            sub = $ElementRelation(
              element = ğ‚,
              set = O
            )
          ),
          $SubSup(
            body = $Parens(
              body = âˆ˜,
              style = '()'
            ),
            sub = $ElementRelation(
              element = $Group(
                items = [ğƒ, ğ„, ğ…],
                separator = ','
              ),
              set = O
            )
          )
        ],
        style = '[]'
      ),
      sub = u
    )],
    equalityDefinition = {
      leftParameters = #(
        O: %Set,
        ğ€: %Binding(
          O,
          #(ğ: %Binding(
            %previous,
            #(M: %Set)
          ))
        ),
        ğ‚: %Binding(
          O,
          #(i: %Element(M[ğ‚,ğ‚]))
        ),
        ğƒ: %Binding(
          O,
          #(ğ„: %Binding(
            %previous,
            #(ğ…: %Binding(
              %previous,
              #(âˆ˜: %Element($../Essentials/Functions/Operations/Operations(
                X = {M[ğ„,ğ…]},
                Y = {M[ğƒ,ğ„]},
                Z = {M[ğƒ,ğ…]}
              )))
            ))
          ))
        ),
        _1: %Constraint(%forall(
          #(
            ğ–: %Element(O),
            ğ—: %Element(%previous),
            ğ˜: %Element(%previous),
            ğ™: %Element(%previous),
            f: %Element(M[ğ–,ğ—]),
            g: %Element(M[ğ—,ğ˜]),
            h: %Element(M[ğ˜,ğ™])
          ),
          %equals(
            $../Essentials/Functions/Operations/value(
              X = {M[ğ—,ğ™]},
              Y = {M[ğ–,ğ—]},
              Z = {M[ğ–,ğ™]},
              âˆ— = {âˆ˜[ğ–,ğ—,ğ™]},
              x = {$../Essentials/Functions/Operations/value(
                X = {M[ğ˜,ğ™]},
                Y = {M[ğ—,ğ˜]},
                Z = {M[ğ—,ğ™]},
                âˆ— = {âˆ˜[ğ—,ğ˜,ğ™]},
                x = {h},
                y = {g}
              )},
              y = {f}
            ),
            $../Essentials/Functions/Operations/value(
              X = {M[ğ˜,ğ™]},
              Y = {M[ğ–,ğ˜]},
              Z = {M[ğ–,ğ™]},
              âˆ— = {âˆ˜[ğ–,ğ˜,ğ™]},
              x = {h},
              y = {$../Essentials/Functions/Operations/value(
                X = {M[ğ—,ğ˜]},
                Y = {M[ğ–,ğ—]},
                Z = {M[ğ–,ğ˜]},
                âˆ— = {âˆ˜[ğ–,ğ—,ğ˜]},
                x = {g},
                y = {f}
              )}
            )
          )
        )),
        _2: %Constraint(%forall(
          #(
            ğ—: %Element(O),
            ğ˜: %Element(%previous),
            f: %Element(M[ğ—,ğ˜])
          ),
          %equals(
            $../Essentials/Functions/Operations/value(
              X = {M[ğ˜,ğ˜]},
              Y = {M[ğ—,ğ˜]},
              Z = {M[ğ—,ğ˜]},
              âˆ— = {âˆ˜[ğ—,ğ˜,ğ˜]},
              x = {i[ğ˜]},
              y = {f}
            ),
            $../Essentials/Functions/Operations/value(
              X = {M[ğ—,ğ˜]},
              Y = {M[ğ—,ğ—]},
              Z = {M[ğ—,ğ˜]},
              âˆ— = {âˆ˜[ğ—,ğ—,ğ˜]},
              x = {f},
              y = {i[ğ—]}
            ),
            f
          )
        )),
        _3: %Constraint(%forall(
          #(
            ğ—: %Element(O),
            ğ˜: %Element(%previous),
            _4: %Constraint(%exists(
              #(
                f: %Element(M[ğ—,ğ˜]),
                g: %Element(M[ğ˜,ğ—])
              ),
              formula = %and(
                %equals(
                  $../Essentials/Functions/Operations/value(
                    X = {M[ğ—,ğ˜]},
                    Y = {M[ğ˜,ğ—]},
                    Z = {M[ğ˜,ğ˜]},
                    âˆ— = {âˆ˜[ğ˜,ğ—,ğ˜]},
                    x = {f},
                    y = {g}
                  ),
                  i[ğ˜]
                ),
                %equals(
                  $../Essentials/Functions/Operations/value(
                    X = {M[ğ˜,ğ—]},
                    Y = {M[ğ—,ğ˜]},
                    Z = {M[ğ—,ğ—]},
                    âˆ— = {âˆ˜[ğ—,ğ˜,ğ—]},
                    x = {g},
                    y = {f}
                  ),
                  i[ğ—]
                )
              )
            ))
          ),
          %equals(ğ—, ğ˜)
        ))
      ),
      rightParameters = #(
        P: %Set,
        ğ€: %Binding(
          P,
          #(ğ: %Binding(
            %previous,
            #(N: %Set)
          ))
        ),
        ğ‚: %Binding(
          P,
          #(j: %Element(N[ğ‚,ğ‚]))
        ),
        ğƒ: %Binding(
          P,
          #(ğ„: %Binding(
            %previous,
            #(ğ…: %Binding(
              %previous,
              #(âˆ™: %Element($../Essentials/Functions/Operations/Operations(
                X = {N[ğ„,ğ…]},
                Y = {N[ğƒ,ğ„]},
                Z = {N[ğƒ,ğ…]}
              )))
            ))
          ))
        ),
        _1: %Constraint(%forall(
          #(
            ğ–: %Element(P),
            ğ—: %Element(%previous),
            ğ˜: %Element(%previous),
            ğ™: %Element(%previous),
            f: %Element(N[ğ–,ğ—]),
            g: %Element(N[ğ—,ğ˜]),
            h: %Element(N[ğ˜,ğ™])
          ),
          %equals(
            $../Essentials/Functions/Operations/value(
              X = {N[ğ—,ğ™]},
              Y = {N[ğ–,ğ—]},
              Z = {N[ğ–,ğ™]},
              âˆ— = {âˆ™[ğ–,ğ—,ğ™]},
              x = {$../Essentials/Functions/Operations/value(
                X = {N[ğ˜,ğ™]},
                Y = {N[ğ—,ğ˜]},
                Z = {N[ğ—,ğ™]},
                âˆ— = {âˆ™[ğ—,ğ˜,ğ™]},
                x = {h},
                y = {g}
              )},
              y = {f}
            ),
            $../Essentials/Functions/Operations/value(
              X = {N[ğ˜,ğ™]},
              Y = {N[ğ–,ğ˜]},
              Z = {N[ğ–,ğ™]},
              âˆ— = {âˆ™[ğ–,ğ˜,ğ™]},
              x = {h},
              y = {$../Essentials/Functions/Operations/value(
                X = {N[ğ—,ğ˜]},
                Y = {N[ğ–,ğ—]},
                Z = {N[ğ–,ğ˜]},
                âˆ— = {âˆ™[ğ–,ğ—,ğ˜]},
                x = {g},
                y = {f}
              )}
            )
          )
        )),
        _2: %Constraint(%forall(
          #(
            ğ—: %Element(P),
            ğ˜: %Element(%previous),
            f: %Element(N[ğ—,ğ˜])
          ),
          %equals(
            $../Essentials/Functions/Operations/value(
              X = {N[ğ˜,ğ˜]},
              Y = {N[ğ—,ğ˜]},
              Z = {N[ğ—,ğ˜]},
              âˆ— = {âˆ™[ğ—,ğ˜,ğ˜]},
              x = {j[ğ˜]},
              y = {f}
            ),
            $../Essentials/Functions/Operations/value(
              X = {N[ğ—,ğ˜]},
              Y = {N[ğ—,ğ—]},
              Z = {N[ğ—,ğ˜]},
              âˆ— = {âˆ™[ğ—,ğ—,ğ˜]},
              x = {f},
              y = {j[ğ—]}
            ),
            f
          )
        )),
        _3: %Constraint(%forall(
          #(
            ğ—: %Element(P),
            ğ˜: %Element(%previous),
            _4: %Constraint(%exists(
              #(
                f: %Element(N[ğ—,ğ˜]),
                g: %Element(N[ğ˜,ğ—])
              ),
              formula = %and(
                %equals(
                  $../Essentials/Functions/Operations/value(
                    X = {N[ğ—,ğ˜]},
                    Y = {N[ğ˜,ğ—]},
                    Z = {N[ğ˜,ğ˜]},
                    âˆ— = {âˆ™[ğ˜,ğ—,ğ˜]},
                    x = {f},
                    y = {g}
                  ),
                  j[ğ˜]
                ),
                %equals(
                  $../Essentials/Functions/Operations/value(
                    X = {N[ğ˜,ğ—]},
                    Y = {N[ğ—,ğ˜]},
                    Z = {N[ğ—,ğ—]},
                    âˆ— = {âˆ™[ğ—,ğ˜,ğ—]},
                    x = {g},
                    y = {f}
                  ),
                  j[ğ—]
                )
              )
            ))
          ),
          %equals(ğ—, ğ˜)
        ))
      ),
      definition = [%exists(
        #(
          Ï†: %Element($../Essentials/Functions/Bijections(
            X = {O},
            Y = {P}
          )),
          ğ€: %Binding(
            O,
            #(ğ: %Binding(
              %previous,
              #(Ïˆ: %Element($../Essentials/Functions/Bijections(
                X = {M[ğ€,ğ]},
                Y = {N[
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ€}
                  ),
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ}
                  )
                ]}
              )))
            ))
          )
        ),
        formula = %and(
          %forall(
            #(ğ‚: %Element(O)),
            %equals(
              $../Algebra/Isomorphisms/"element transport"(
                X = {M[ğ‚,ğ‚]},
                Y = {N[
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ‚}
                  ),
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ‚}
                  )
                ]},
                Ï† = {Ïˆ[ğ‚,ğ‚]},
                x = {i[ğ‚]}
              ),
              j[$../Algebra/Isomorphisms/"element transport"(
                X = {O},
                Y = {P},
                Ï† = {Ï†},
                x = {ğ‚}
              )]
            )
          ),
          %forall(
            #(
              ğƒ: %Element(O),
              ğ„: %Element(%previous),
              ğ…: %Element(%previous)
            ),
            %equals(
              $../Algebra/Isomorphisms/"morphism transport"(
                X_1 = {M[ğ„,ğ…]},
                X_2 = {M[ğƒ,ğ„]},
                X_3 = {M[ğƒ,ğ…]},
                Y_1 = {N[
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ„}
                  ),
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ…}
                  )
                ]},
                Y_2 = {N[
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğƒ}
                  ),
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ„}
                  )
                ]},
                Y_3 = {N[
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğƒ}
                  ),
                  $../Algebra/Isomorphisms/"element transport"(
                    X = {O},
                    Y = {P},
                    Ï† = {Ï†},
                    x = {ğ…}
                  )
                ]},
                Ï†_1 = {Ïˆ[ğ„,ğ…]},
                Ï†_2 = {Ïˆ[ğƒ,ğ„]},
                Ï†_3 = {Ïˆ[ğƒ,ğ…]},
                âˆ™ = {âˆ˜[ğƒ,ğ„,ğ…]}
              ),
              âˆ™[
                $../Algebra/Isomorphisms/"element transport"(
                  X = {O},
                  Y = {P},
                  Ï† = {Ï†},
                  x = {ğƒ}
                ),
                $../Algebra/Isomorphisms/"element transport"(
                  X = {O},
                  Y = {P},
                  Ï† = {Ï†},
                  x = {ğ„}
                ),
                $../Algebra/Isomorphisms/"element transport"(
                  X = {O},
                  Y = {P},
                  Ï† = {Ï†},
                  x = {ğ…}
                )
              ]
            )
          )
        )
      )],
      isomorphic = %true
    }
  }

  display = [$SubSup(
    body = 'ğ“’ğ“ªğ“½',
    sub = u
  )],
  definitionDisplay = {
    parameter = #(ğ“’: %Expr),
    singularName = [[
      $DependentWord(
        word = 'small',
        argument = u
      ),
      ' category'
    ]],
    pluralName = [[
      $DependentWord(
        word = 'small',
        argument = u
      ),
      ' categories'
    ]]
  }
}
